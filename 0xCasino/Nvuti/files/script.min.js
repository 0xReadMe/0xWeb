window.onerror = null;
$(function() {
    window.history.replaceState(null, null, window.location.pathname);
    $("#MinRange").html(Math.floor(($("#BetPercent").val() / 100) * 999999));
    $("#MaxRange").html(999999 - Math.floor(($("#BetPercent").val() / 100) * 999999));
    $("#BetProfit").html(((100 / $("#BetPercent").val()) * $("#BetSize").val()).toFixed(2))
	$('#BetX').html(((100 / $('#BetPercent').val())).toFixed(2));
});
function historys() {
    if (navigator.onLine) {
        $.ajax({
            url: "/inc/core.php",
            timeout: 10000,
            success: function(b) {
                var c = jQuery.parseJSON(b);
                var a = 0;
                if (c.count == 0) {
                    a
                }
                if (c.count >= 15) {
                    a = 15
                }
                if (c.count < 15) {
                    a = c.count
                }
                $("#response").prepend(c.game);
                $("#response").children().slice(a).remove();
                $("#oe").html(c.online)
            },
            error: function() {}
        })
    } else {}
}
setInterval("historys()", 300);

function offliner() {
	if(navigator.onLine) {
		$.ajax({
			url: "/inc/offline.php",
			timeout: 10000,
			success: function(a) {},
			error: function() {}
		})
	} else {}
}
setInterval("offliner()", 3000);

function new_reset_pass() {
	if($("#pass").val().length < 5) {
		$("#error_reset").css("display", "block");
		return $("#error_reset").html("Пароль от 5 символов")
	}
	if($("#pass").val() != $("#repeatPass").val()) {
		$("#error_reset").css("display", "block");
		return $("#error_reset").html("Пароли не совпадают")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_reset").css("display", "none")
		},
		data: {
			type: "newResetPass",
			pass: $("#pass").val(),
			hash: $("#hash").val(),
			sid: $("#uid").val()
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#succes_resetPass").show();
				setTimeout(function() {
					window.location.href = "/"
				}, 5000);
				return false
			} else {
				$("#error_resetPass").show();
				return $("#error_resetPass").html(b.error)
			}
		}
	})
}
function hideBonus() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "hideBonus",
			sid: Cookies.get("sid")
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#bonusRow").hide()
			}
		}
	})
}

function getBonus() {
	if($("#vkPage").val() == "") {
		$("#error_bonus").show();
		return $("#error_bonus").html("Введите страницу")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "getBonus",
			sid: Cookies.get("sid"),
			vk: $("#vkPage").val(),
			a: Cookies.get("ab")
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				Cookies.set("ab", "1");
				$("#success_bonus").show();
				$("#success_bonus").html(b.error);
				$("#userBalance").attr("myBalance", b.new_balance);
				updateBalance(b.balance, b.new_balance);
				$("#error_bonus").hide();
				setTimeout(function() {
					$("#bonusRow").hide()
				}, 2500)
			}
			if(b.success == "error") {
				setTimeout(function() {
					$("#bonusRow").hide()
				}, 2500);
				$("#error_bonus").show();
				return $("#error_bonus").html(b.error)
			}
		}
	})
}
function vkunconnect() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "vkunconnect",
			sid: Cookies.get("sid"),
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#vk_success").show();
				$("#vk_success").html(b.error);
				setTimeout(function() {
					$("#vk_success").hide()
				}, 7000);
				$("#vkupd").html('<a style="color:#3B5998" href="https://oauth.vk.com/authorize?client_id=' + client_id + "&display=page&redirect_uri=" + url + '&response_type=code&v=5.74" class="btn btn-social mb-1 mr-1 btn-outline-facebook"><span class="fa fa-vk"></span> <span class="px-1">Привязать ВК</span> </a>')
			} else {
				$("#vk_error").show();
				$("#vk_error").html(b.error);
				setTimeout(function() {
					$("#vk_error").hide()
				}, 7000)
			}
		}
	})
}
function perevod_wallet() {
	if($("#nick_user").val() == "") {
		return $("#error_perevod").show().html("Заполните все поля")
	}
	if($("#suma_perevoda").val() == "") {
		return $("#error_perevod").show().html("Заполните все поля")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "perevod_wallet",
			sid: Cookies.get("sid"),
			nick: $("#nick_user").val(),
			summa: $("#suma_perevoda").val()
		},
		beforeSend: function() {
			$("#loader3").css("position", "").show();
			$("#dot-container3").show();
			$("#perevod_btn").hide();
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#success_perevod").show().html(b.error);
				$("#error_perevod").hide();
				$("#nick_user").val("");
				$("#suma_perevoda").val("");
				updateBalance(b.balance, b.new_balance);
				setTimeout(function() {
					$("#success_perevod").hide();
				}, 5000);
				$("#loader3").show();
				$("#dot-container3").hide();
				$("#perevod_btn").show();
			} else {
				$("#loader3").show();
				$("#dot-container3").hide();
				$("#perevod_btn").show();
				$("#error_perevod").show().html(b.error);
			}
		}
	})
}
function adm_out() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "adm_out",
			sid: Cookies.get("sid"),
			currency: $("#out-currency").val(),
			amount: $("#out-amount").val(),
		},
		beforeSend: function() {
			$("#loader").css("position", "").show();
			$("#dot-container").show();
			$("#withdrawB-out").hide()
		},
		success: function(a) {
			if(a == "Минимальный вывод 50 " + wallet + "null") {
				$("#out_error").show();
				$("#out_error").html(a);
				setTimeout(function() {
					$("#out_error").hide()
				}, 5000);
				$("#loader").css("position", "").hide();
				$("#dot-container").hide();
				$("#withdrawB-out").show()
			} else {
				$("#out_success").show();
				$("#out_success").html(a);
				setTimeout(function() {
					$("#out_success").hide()
				}, 5000);
				$("#loader").css("position", "").hide();
				$("#dot-container").hide();
				$("#withdrawB-out").show()
			}
		}
	})
}
function last_out() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "outusers",
			page: $("#pgi_l").val()
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#tableoutusers").html(b.out);
				$("#pg_l").html(b.pg);
			}
		}
	})
}

function my_referal() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "referals",
			sid: Cookies.get("sid")
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#thref").html(b.thref);
				$("#tableref").html(b.tbref);
				$("#myrefurl").html(b.refurl);
				$("#myrefurlcopy").attr("data-clipboard-text", b.refurl);
				$("#vk_error").hide()
			}
		}
	})
}
$("#menu-mob").click(function() {
	if($(".nav-menu-main").hasClass("is-active")) {
		$("#menu-mob").addClass("ft-menu");
		$("#menu-mob").removeClass("ft-x");
	} else {
		$("#menu-mob").addClass("ft-x");
		$("#menu-mob").removeClass("ft-menu");
	}
});

new Clipboard(".btn-clipboard");
$(window).on("load", function() {
	$preloader = $(".preloader"), $loader = $preloader.find(".page-loader-circle");
	$loader.fadeOut();
	$preloader.delay(350).fadeOut("slow")
});
jQuery(function(a) {
	a(function() {
		function b() {
			var c = a("#hide_search option:selected").val();
			switch (c) {
				case "Qiwi":
					a("#nameWithdraw").html("Номер телефона:");
					a("#walletNumber").attr("placeholder", "+");
					a("#walletNumber").val("+");
					break;
				case "YandexMoney":
					a("#nameWithdraw").html("Номер кошелька:");
					a("#walletNumber").attr("placeholder", "410011499718000");
					a("#walletNumber").val("4100");
					break;
				case "Payeer":
					a("#nameWithdraw").html("Номер кошелька:");
					a("#walletNumber").attr("placeholder", "P1000000");
					a("#walletNumber").val("P");
					break;
				case "VISA":
					a("#nameWithdraw").html("Номер карты:");
					a("#walletNumber").attr("placeholder", "427607XXXX785577");
					a("#walletNumber").val("4276");
					break;
				case "MASTERCARD":
					a("#nameWithdraw").html("Номер карты:");
					a("#walletNumber").attr("placeholder", "541207XXXX785577");
					a("#walletNumber").val("5412");
					break
			}
		}
		b();
		a("#hide_search").change(function() {
			b()
		})
	})
});

function send(a) {
	var b = $(a.target)[0].id;
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "otmena",
			sid: Cookies.get("sid"),
			idout: b
		},
		success: function(c) {
			var d = jQuery.parseJSON(c);
			if(d.success == "success") {
				$("#emptyHistory").hide();
				$("#withdrawT").html(d.update_bd);
				updateBalance(d.balance, d.new_balance)
			}
		}
	})
}


function register_show() {
	$("#login").hide();
	$("#reset").hide();
	$("#register").fadeIn("slow", function() {})
}

function login_show() {
	$("#register").hide();
	$("#reset").hide();
	$("#login").fadeIn("slow", function() {})
}

function reset_show() {
	$("#login").hide();
	$("#register").hide();
	$("#reset").fadeIn("slow", function() {})
}

function getContent(a) {
	var b = {
		timestamp: a
	};
	$.ajax({
		type: "GET",
		url: "longpool/server/server.php?rr=",
		data: b,
		success: function(c) {
			var d = jQuery.parseJSON(c);
			if(d.data_from_file != "") {
				$("#response").html(d.data_from_file)
			}
			getContent(d.timestamp)
		}
	})
}

window.renderRecaptchas = function() {
	/*var a = document.querySelectorAll(".g-recaptcha");
	for(var b = 0; b < a.length; b++) {
		grecaptcha.render(a[b], {
			sitekey: a[b].getAttribute("data-sitekey")
		})
	}*/
};

function login() {
	if($("#userLogin").val().length < 4) {
		$("#error_enter").css("display", "block");
		return $("#error_enter").html("Логин от 4 символов")
	}
	if($("#userPass").val() == "") {
		$("#error_enter").css("display", "block");
		return $("#error_enter").html("Введите пароль")
	}
	if($("#g-recaptcha-response").val() == "") {
		$("#error_enter").css("display", "block");
		return $("#error_enter").html("Поставьте галочку в капче")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_enter").css("display", "none");
			$("#loader").css("position", "");
			$("#enter_but").css("pointer-events", "none");
			$("#dot-container").css("display", "");
			$("#text_enter").css("display", "none");
			$("#text_enter").css("display", "none")
		},
		data: {
			type: "login",
			login: $("#userLogin").val(),
			rc: $("#g-recaptcha-response").val(),
			pass: $("#userPass").val(),
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				Cookies.set("sid", b.sid, {
					expires: 365,
					path: "/",
					secure: true
				});
				Cookies.set("uid", b.uid, {
					expires: 365,
					path: "/",
					secure: true
				});
				Cookies.set("login", $("#userLogin").val(), {
					expires: 365,
					path: "/",
					secure: true
				});
				window.location.href = ""
			} else {
				grecaptcha.reset();
				$("#enter_but").css("pointer-events", "");
				$("#loader").css("position", "absolute");
				$("#dot-container").css("display", "none");
				$("#text_enter").css("display", "block");
				$("#error_enter").html(b.error);
				$("#error_enter").css("display", "block")
			}
		}
	})
}
$("#userLoginRegister").keydown(function(a) {
	if(a.which === 13) {
		register1()
	}
});
$("#userEmailRegister").keydown(function(a) {
	if(a.which === 13) {
		register1()
	}
});
$("#userPassRegister").keydown(function(a) {
	if(a.which === 13) {
		register1()
	}
});
$('#userLoginRegister').on('input', function() {
	if(this.value.match(/[^a-zA-Z0-9]/g)){
		this.value = this.value.replace(/[^a-zA-Z0-9]/g, "");
	};
});
$('#userEmailRegister').on('input', function() {
	if(this.value.match(/[^a-zA-Z0-9@.-_-]/g)){
		this.value = this.value.replace(/[^a-zA-Z0-9@.-_-]/g, "");
	};
});

function isValidEmailAddress(a) {
	var b = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,5})(\]?)$/;
	return b.test(a);
}

function register1() {
	if($("#userLoginRegister").val().length < 4) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Логин от 4 до 15 символов")
	}
	if($("#userEmailRegister").val() == "") {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Введите email")
	}
	if(!isValidEmailAddress($("#userEmailRegister").val())) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Введите корректный email")
	}
	if($("#userPassRegister").val() == "") {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Введите пароль")
	}
	if($("#userPassRegister").val().length < 5) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Пароль от 5 символов")
	}
	if($("#userPassRegister1").val() == "") {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Повторите пароль")
	}
	if($("#userPassRegister1").val().length < 5) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Пароль от 5 символов")
	}
	if($("#userPassRegister1").val() != $("#userPassRegister").val()) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Пароли не совпадают")
	}
	if(!$("#rulesagree").prop("checked")) {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Согласитесь с правилами")
	}
	if($("#g-recaptcha-response-1").val() == "") {
		$("#error_register").css("display", "block");
		return $("#error_register").html("Поставьте галочку в капче")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_register").css("display", "none");
			$("#loader_register").css("position", "");
			$("#enter_but").css("pointer-events", "none");
			$("#dot-container_register").css("display", "");
			$("#text_register").css("display", "none")
		},
		data: {
			type: "register",
			login: $("#userLoginRegister").val(),
			rc: $("#g-recaptcha-response-1").val(),
			pass: $("#userPassRegister").val(),
			email: $("#userEmailRegister").val(),
			ref: Cookies.get("ref")
		},
		success: function(a) {
			$("#enter_but").css("pointer-events", "");
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				Cookies.set("sid", b.sid, {
					expires: 365,
					path: "/",
					secure: true
				});
				Cookies.set("login", $("#userLoginRegister").val(), {
					expires: 365,
					path: "/",
					secure: true
				});
				document.location.href = "";
				return false
			} else {
				grecaptcha.reset(1);
				$("#error_register").html(b.error);
				$("#error_register").css("display", "block");
				$("#text_register").css("display", "block");
				$("#loader_register").css("position", "absolute");
				$("#dot-container_register").css("display", "none")
			}
		}
	})
}

$('#loginemail').on('input', function() {
	if(this.value.match(/[^a-zA-Z0-9\@\.\-]/g)){
		this.value = this.value.replace(/[^a-zA-Z0-9\@\.\-]/g, "");
	};
});
$("#loginemail").keydown(function(a) {
	if(a.which === 13) {
		reset_password();
	}
});

function reset_password() {
	if($("#loginemail").val().length < 4) {
		$("#error_reset").css("display", "block");
		return $("#error_reset").html("Введите корректные данные")
	}
	if($("#g-recaptcha-response-2").val() == "") {
		$("#error_reset").css("display", "block");
		return $("#error_reset").html("Поставьте галочку в капче")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_reset").css("display", "none");
			$("#loader_reset").css("position", "");
			$("#reset_success").css("display", "none");
			$("#reset_but").css("pointer-events", "none");
			$("#dot-container_reset").css("display", "");
			$("#text_reset").css("display", "none")
		},
		data: {
			type: "resetPass",
			rc: $("#g-recaptcha-response-2").val(),
			login: $("#loginemail").val()
		},
		success: function(a) {
			$("#reset_but").css("pointer-events", "");
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				grecaptcha.reset(2);
				$("#gtt").show();
				$("#reset_success").css("display", "");
				$("#reset_success").html(b.mesa);
				$("#reset_but").css("display", "none");
				$("#loginemail").val("");
				setTimeout(function() {
					$("#reset_success").css("display", "none");
					$("#reset_but").css("display", "block");
					$("#loader_reset").css("position", "none");
					$("#dot-container_reset").css("display", "none");
					$("#gtt").hide();
					$("#text_reset").css("display", "");
					$("#loader_reset").css("position", "absolute")
				}, 7000);
				return false
			} else {
				grecaptcha.reset(2);
				$("#loader_reset").css("position", "absolute");
				$("#reset_but").css("display", "");
				$("#dot-container_reset").css("display", "none");
				$("#text_reset").css("display", "");
				$("#error_reset").html(b.error);
				$("#error_reset").css("display", "block")
			}
		}
	})
}

function resetPass() {
	if($("#resetPass").val() == "") {
		$("#error_resetPass").show();
		return $("#error_resetPass").html("Введите пароль")
	}
	if($("#resetPass").val().length < 5) {
		$("#error_resetPass").show();
		return $("#error_resetPass").html("Пароль от 5 символов")
	}
	if($("#resetPass").val() != $("#resetPassRepeat").val()) {
		$("#error_resetPass").show();
		return $("#error_resetPass").html("Пароли не совпадают")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_resetPass").hide();
			$("#succes_resetPass").hide()
		},
		data: {
			type: "resetPassPanel",
			sid: Cookies.get("sid"),
			newPass: $("#resetPass").val()
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#succes_resetPass").show();
				Cookies.set("sid", b.sid, {
					path: "/",
					secure: true
				});
				return false
			} else {
				$("#error_resetPass").show();
				return $("#error_resetPass").html(b.error)
			}
		}
	})
}

function active() {
	if($("#promo").val() == "") {
		$("#error_promo").show();
		return $("#error_promo").html("Введите Промокод")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error_promo").hide();
			$("#succes_promo").hide()
		},
		data: {
			type: "PromoActive",
			sid: Cookies.get("sid"),
			promo: $("#promo").val()
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#succes_promo").show();
				$("#succes_promo").html("Промокод на сумму <b>" + b.suma + " </b> " + wallet + " активирован");
				$("#userBalance").attr("myBalance", b.new_balance);
				updateBalance(b.balance, b.new_balance);
				return false
			} else {
				$("#error_promo").show();
				return $("#error_promo").html(b.error)
			}
		}
	})
}

function updateBalance(c, a) {
	var b = document.getElementById("userBalance");
	od = new Odometer({
		el: b,
		value: c
	});
	od.update(a)
}

function updateHash() {
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#checkBet").css("display", "none");
			$("#loader_hash").css("display", "");
			$("#betStart").css("opacity", "0.25");
			$("#controlBet").css("opacity", "0.25");
			$("#betStart").css("pointer-events", "none");
			$("#controlBet").css("pointer-events", "none");
			$("#hashBet").html("")
		},
		data: {
			type: "updateHash",
			hid: $("#hashBet").attr("hid"),
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#checkBet").css("display", "");
				Cookies.set("hid", b.hid, {
					path: "/",
					secure: true
				});
				$("#hashBet").attr("hid", b.hid);
				$("#hashBet").html(b.hash);
				$("#loader_hash").css("display", "none");
				$("#betStart").css("opacity", "");
				$("#controlBet").css("opacity", "");
				$("#betStart").css("pointer-events", "");
				$("#controlBet").css("pointer-events", "")
			}
			sss();
			if("error" in b) {
				return document.location.href = ""
			}
		}
	})
}
function bet1(a) {
	if($("#userBalance").html() < $("#BetSize1").val()) {
		$("#error1_bet").html("Недостаточно средств!");
		return $("#error1_bet").css("display", "")
	}
	if($("#BetSize1").val() < minbetsize) {
		$("#error1_bet").html("Неправильная ставка! Минимальная ставка: " + minbetsize + "" + wallet);
		return $("#error1_bet").css("display", "")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#error1_bet").css("display", "none");
			$("#succes1_bet").css("display", "none");
			$("#buttonMax").css("pointer-events", "none");
			$("#buttonMin").css("pointer-events", "none")
		},
        data: {
            type: a,
            sid: Cookies.get("sid"),
            hid: $("#hashBet").attr("hid"),
            betSize: $("#BetSize1").val(),
            betPercent: 50,
        },
        success: function(b) {
            $("#buttonMax").css("pointer-events", "");
            $("#buttonMin").css("pointer-events", "");
            var c = jQuery.parseJSON(b);
            if (c.success == "success") {
                if (c.type == "win") {
				var audio = new Audio();
                 audio.src = 'files/coin_01.wav';
                  audio.volume = 0.5;
                   audio.autoplay = true;
                    $("#succes1_bet").css("display", "");
                    $("#succes1_bet").html("Вы выиграли <b>" + c.profit + " </b> " + wallet)
                }
                if (c.type == "lose") {
				var audio = new Audio();
                 audio.src = 'files/mouse_click_08.wav';
                  audio.volume = 0.5;
                   audio.autoplay = true;
                    $("#error1_bet").css("display", "");
                    $("#error1_bet").html("Проигрыш!")
                }
                $("#hashBet").html(c.hash);
                Cookies.set("hid", c.hid, {
                    path: "/",
                    secure: true
                });
                $("#hashBet").attr("hid", c.hid);
                sss();
                $("#userBalance").attr("myBalance", c.new_balance);
                updateBalance(c.balance, c.new_balance)
            }
            if (c.success == "error") {
                $("#error1_bet").html(c.error);
                return $("#error1_bet").css("display", "")
            }
        }
    })
}

function bet(a) {
	if($("#userBalance").html() < $("#BetSize").val()) {
		$("#error_bet").html("Недостаточно средств");
		return $("#error_bet").css("display", "")
	}
	if($("#BetSize").val() < minbetsize) {
		$("#error_bet").html("Ставки от " + minbetsize + " " + wallet);
		return $("#error_bet").css("display", "")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#checkBet").css("display", "none");
			$("#error_bet").css("display", "none");
			$("#succes_bet").css("display", "none");
			$("#betLoad1").css("display", "");
			$("#buttonMax").css("pointer-events", "none");
			$("#buttonMin").css("pointer-events", "none")
		},
        data: {
            type: a,
            sid: Cookies.get("sid"),
            hid: $("#hashBet").attr("hid"),
            betSize: $("#BetSize").val(),
            betPercent: $("#BetPercent").val(),
        },
        success: function(b) {
            $("#buttonMax").css("pointer-events", "");
            $("#buttonMin").css("pointer-events", "");
            $("#betLoad1").css("display", "none");
            var c = jQuery.parseJSON(b);
            if (c.success == "success") {
                $("#checkBet").css("display", "");
                $("#checkBet").attr("href", "game?id=" + c.check_bet);
                if (c.type == "win") {
				var audio = new Audio();
                 audio.src = 'files/coin_01.wav';
                  audio.volume = 0.6;
                   audio.autoplay = true;
                    $("#succes_bet").css("display", "");
                    $("#succes_bet").html("Вы выиграли <b>" + c.profit + " </b> " + wallet)
                }
                if (c.type == "lose") {
				var audio = new Audio();
                 audio.src = 'files/mouse_click_08.wav';
                  audio.volume = 0.6;
                   audio.autoplay = true;
                    $("#error_bet").css("display", "");
                    $("#error_bet").html("Выпало  " + c.number)
                }
                $("#hashBet").html(c.hash);
                Cookies.set("hid", c.hid, {
                    path: "/",
                    secure: true
                });
                $("#hashBet").attr("hid", c.hid);
                sss();
                $("#userBalance").attr("myBalance", c.new_balance);
                updateBalance(c.balance, c.new_balance)
            }
            if (c.success == "error") {
                $("#error_bet").html(c.error);
                return $("#error_bet").css("display", "")
            }
        }
    })
}
function updateProfit() {
	$("#BetProfit").html(((100 / $("#BetPercent").val()) * $("#BetSize").val()).toFixed(2));
	$("#MinRange").html(Math.floor(($("#BetPercent").val() / 100) * 999999));
	$("#MaxRange").html(999999 - Math.floor(($("#BetPercent").val() / 100) * 999999));
	$('#BetX').html(((100 / $('#BetPercent').val())).toFixed(2));
	if($("#BetPercent").val() <= 0) {
		updateProfit()
	}
	if($("#BetSize").val() <= 0) {
		updateProfit()
	}
}
function sss() {
	$("#hashBet").fadeOut("slow", function() {
		$("#hashBet").fadeIn("slow", function() {})
	})
}
$("#BetPercent").keyup(function() {
	$("#BetProfit").html(((100 / $("#BetPercent").val()) * $("#BetSize").val()).toFixed(2));
	$("#MinRange").html(Math.floor(($("#BetPercent").val() / 100) * 999999));
	$("#MaxRange").html(999999 - Math.floor(($("#BetPercent").val() / 100) * 999999))
});
$("#BetSize").keyup(function() {
	$("#MinRange").html(Math.floor(($("#BetPercent").val() / 100) * 999999));
	$("#MaxRange").html(999999 - Math.floor(($("#BetPercent").val() / 100) * 999999));
	$("#BetProfit").html(((100 / $("#BetPercent").val()) * $("#BetSize").val()).toFixed(2))
});


function deposit() {
	if($("#systemPay").val() > 3 || !$.isNumeric($("#systemPay").val())) {
		$("#error_deposit").show();
		return $("#error_deposit").html("Укажите систему пополнения")
	}
	if($("#depositSize").val() == "") {
		$("#error_deposit").show();
		return $("#error_deposit").html("Введите сумму")
	}
	if(!$.isNumeric($("#depositSize").val())) {
		$("#error_deposit").show();
		return $("#error_deposit").html("Введите корректную сумму")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		data: {
			type: "deposit",
			sid: Cookies.get("sid"),
			system: $("#systemPay").val(),
			size: $("#depositSize").val()
		},
		success: function(a) {
			var b = jQuery.parseJSON(a);
			if(b.success == "success") {
				$("#depositLoad").show();
				window.location.href = b.locations
			}
			if(b.success == "error") {
				$("#error_deposit").show();
				return $("#error_deposit").html(b.error)
			}
		}
	})
}

function withdraw() {
	if($("#WithdrawSize").val() == "" || $("#walletNumber").val() == "" || $("#hide_search").val() == "") {
		$("#error_withdraw").show();
		return $("#error_withdraw").html("Заполните все поля")
	}
	if($("#walletNumber").val().length < 8) {
		$("#error_withdraw").show();
		return $("#error_withdraw").html("Номер/Кошелек от 8 цифр")
	}
	$.ajax({
		type: "POST",
		url: "/inc/engine.php",
		beforeSend: function() {
			$("#withdrawB").html("");
			$("#error_withdraw").hide();
			$("#succes_withdraw").hide();
			$("#loader").css("display", "")
		},
		data: {
			type: "withdraw",
			sid: Cookies.get("sid"),
			system: $("#hide_search").val(),
			size: $("#WithdrawSize").val(),
			wallet: $("#walletNumber").val()
		},
		success: function(b) {
			$("#withdrawB").html("Выплата");
			$("#loader").css("display", "none");
			var c = jQuery.parseJSON(b);
			if(c.success == "success") {
				$("#emptyHistory").hide();
				$("#succes_withdraw").show();
				var a = $("#withdrawT").html();
				$("#withdrawT").html(c.add_bd + a);
				updateBalance(c.balance, c.new_balance);
				setTimeout(function() {
					$("#WithdrawSize").val("");
					$("#walletNumber").val("");
					$("#succes_withdraw").hide()
				}, 2500)
			}
			if(c.success == "error") {
				$("#error_withdraw").show();
				return $("#error_withdraw").html(c.error)
			}
		}
	})
}

/*if($("input[type=number]")) {
	$("input[type=number]").on('keypress', function(e) {
		var key = !isNaN(e.charCode) ? e.charCode : e.keyCode;
		function keyAllowed() {
			var keys = [8,9,13,16,17,18,19,20,27,46,48,49,50,51,52,53,54,55,56,57,91,92,93];
			if(key && keys.indexOf(key) === -1) {
				return false;
			} else {
				return true;
			}
		}
		if(!keyAllowed()) {
			e.preventDefault();
		}
	}, false);
	$("input[type=number]").on('paste', function(e) {
		var pasteData = e.clipboardData.getData('text/plain');
		if(pasteData.match(/[^0-9]/)) {
			e.preventDefault();
		}
	}, false);
}*/

$(document).ready(function() {
	$("#buttonMin").keydown(function(event){
		if(event.keyCode == 13 || event.keyCode == 32) {
			event.preventDefault();
			return false;
		}
	});
	$("#buttonMax").keydown(function(event){
		if(event.keyCode == 13 || event.keyCode == 32) {
			event.preventDefault();
			return false;
		}
	});
});
